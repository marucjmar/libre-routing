(()=>{var me={69:x=>{const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",F=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l="undefined"!=typeof BigInt?BigInt:Number;function w(v){let f=v;return f&l(1)&&(f=~f),f>>=l(1),+f.toString()}function re(v){let f="",y=l(v);for(;y>31;){const S=y&l(31)|l(32);f+=A[S],y>>=l(5)}return f+A[y]}function z(v){let f=l(v);const y=f<0;return f<<=l(1),y&&(f=~f),re(f)}x.exports={encode:function L({precision:v=5,thirdDim:f=0,thirdDimPrecision:y=0,polyline:S}){const C=10**v,R=10**y,U=function X(v,f,y){if(v<0||v>15)throw new Error("precision out of range. Should be between 0 and 15");if(y<0||y>15)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(f<0||f>7||4===f||5===f)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");const S=y<<7|f<<4|v;return re(1)+re(S)}(v,f,y),b=[];let V=l(0),I=l(0),k=l(0);return S.forEach(_=>{const $=l(Math.round(_[0]*C));b.push(z($-V)),V=$;const J=l(Math.round(_[1]*C));if(b.push(z(J-I)),I=J,f){const ie=l(Math.round(_[2]*R));b.push(z(ie-k)),k=ie}}),[...U,...b].join("")},decode:function m(v){const f=function P(v){let f=l(0),y=l(0);const S=[];if(v.split("").forEach(C=>{const R=l(function g(v){const f=v.charCodeAt(0);return F[f-45]}(C));f|=(R&l(31))<<y,(R&l(32))===l(0)?(S.push(f),f=l(0),y=l(0)):y+=l(5)}),y>0)throw new Error("Invalid encoding");return S}(v),y=function p(v,f){if(1!=+v.toString())throw new Error("Invalid format version");const y=+f.toString();return{precision:15&y,thirdDim:y>>4&7,thirdDimPrecision:y>>7&15}}(f[0],f[1]),S=10**y.precision,C=10**y.thirdDimPrecision,{thirdDim:R}=y;let U=0,b=0,V=0;const I=[];let k=2;for(;k<f.length;)U+=w(f[k])/S,b+=w(f[k+1])/S,R?(V+=w(f[k+2])/C,I.push([U,b,V]),k+=3):(I.push([U,b]),k+=2);if(k!==f.length)throw new Error("Invalid encoding. Premature ending reached");return{...y,polyline:I}},ABSENT:0,LEVEL:1,ALTITUDE:2,ELEVATION:3}},572:(x,O,A)=>{var F;!function(){"use strict";function B(d,l){var m=d.x-l.x,g=d.y-l.y;return m*m+g*g}function K(d,l,m){var g=l.x,P=l.y,p=m.x-g,w=m.y-P;if(0!==p||0!==w){var L=((d.x-g)*p+(d.y-P)*w)/(p*p+w*w);L>1?(g=m.x,P=m.y):L>0&&(g+=p*L,P+=w*L)}return(p=d.x-g)*p+(w=d.y-P)*w}function G(d,l,m,g,P){for(var w,p=g,L=l+1;L<m;L++){var X=K(d[L],d[l],d[m]);X>p&&(w=L,p=X)}p>g&&(w-l>1&&G(d,l,w,g,P),P.push(d[w]),m-w>1&&G(d,w,m,g,P))}function H(d,l){var m=d.length-1,g=[d[0]];return G(d,0,m,l,g),g.push(d[m]),g}function ee(d,l,m){if(d.length<=2)return d;var g=void 0!==l?l*l:1;return d=m?d:function Q(d,l){for(var P,m=d[0],g=[m],p=1,w=d.length;p<w;p++)B(P=d[p],m)>l&&(g.push(P),m=P);return m!==P&&g.push(P),g}(d,g),H(d,g)}void 0!==(F=function(){return ee}.call(O,A,O,x))&&(x.exports=F)}()}},ce={};function ne(x){var O=ce[x];if(void 0!==O)return O.exports;var A=ce[x]={exports:{}};return me[x](A,A.exports,ne),A.exports}(()=>{"use strict";const x=Symbol("Comlink.proxy"),O=Symbol("Comlink.endpoint"),A=Symbol("Comlink.releaseProxy"),F=Symbol("Comlink.thrown"),B=e=>"object"==typeof e&&null!==e||"function"==typeof e,G=new Map([["proxy",{canHandle:e=>B(e)&&e[x],serialize(e){const{port1:r,port2:t}=new MessageChannel;return H(e,r),[t,[t]]},deserialize:e=>(e.start(),function l(e,r){return g(e,[],r)}(e))}],["throw",{canHandle:e=>B(e)&&F in e,serialize({value:e}){let r;return r=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[r,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}}]]);function H(e,r=self){r.addEventListener("message",function t(n){if(!n||!n.data)return;const{id:o,type:i,path:s}=Object.assign({path:[]},n.data),u=(n.data.argumentList||[]).map(v);let a;try{const c=s.slice(0,-1).reduce((h,M)=>h[M],e),E=s.reduce((h,M)=>h[M],e);switch(i){case"GET":a=E;break;case"SET":c[s.slice(-1)[0]]=v(n.data.value),a=!0;break;case"APPLY":a=E.apply(c,u);break;case"CONSTRUCT":a=function X(e){return Object.assign(e,{[x]:!0})}(new E(...u));break;case"ENDPOINT":{const{port1:h,port2:M}=new MessageChannel;H(e,M),a=function L(e,r){return w.set(e,r),e}(h,[h])}break;case"RELEASE":a=void 0;break;default:return}}catch(c){a={value:c,[F]:0}}Promise.resolve(a).catch(c=>({value:c,[F]:0})).then(c=>{const[E,h]=z(c);r.postMessage(Object.assign(Object.assign({},E),{id:o}),h),"RELEASE"===i&&(r.removeEventListener("message",t),d(r))})}),r.start&&r.start()}function d(e){(function ee(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function m(e){if(e)throw new Error("Proxy has been released and is not useable")}function g(e,r=[],t=function(){}){let n=!1;const o=new Proxy(t,{get(i,s){if(m(n),s===A)return()=>f(e,{type:"RELEASE",path:r.map(u=>u.toString())}).then(()=>{d(e),n=!0});if("then"===s){if(0===r.length)return{then:()=>o};const u=f(e,{type:"GET",path:r.map(a=>a.toString())}).then(v);return u.then.bind(u)}return g(e,[...r,s])},set(i,s,u){m(n);const[a,c]=z(u);return f(e,{type:"SET",path:[...r,s].map(E=>E.toString()),value:a},c).then(v)},apply(i,s,u){m(n);const a=r[r.length-1];if(a===O)return f(e,{type:"ENDPOINT"}).then(v);if("bind"===a)return g(e,r.slice(0,-1));const[c,E]=p(u);return f(e,{type:"APPLY",path:r.map(h=>h.toString()),argumentList:c},E).then(v)},construct(i,s){m(n);const[u,a]=p(s);return f(e,{type:"CONSTRUCT",path:r.map(c=>c.toString()),argumentList:u},a).then(v)}});return o}function P(e){return Array.prototype.concat.apply([],e)}function p(e){const r=e.map(z);return[r.map(t=>t[0]),P(r.map(t=>t[1]))]}const w=new WeakMap;function z(e){for(const[r,t]of G)if(t.canHandle(e)){const[n,o]=t.serialize(e);return[{type:"HANDLER",name:r,value:n},o]}return[{type:"RAW",value:e},w.get(e)||[]]}function v(e){switch(e.type){case"HANDLER":return G.get(e.name).deserialize(e.value);case"RAW":return e.value}}function f(e,r,t){return new Promise(n=>{const o=function y(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}();e.addEventListener("message",function i(s){!s.data||!s.data.id||s.data.id!==o||(e.removeEventListener("message",i),n(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:o},r),t)})}function S(e,r,t,n,o,i,s){try{var u=e[i](s),a=u.value}catch(c){return void t(c)}u.done?r(a):Promise.resolve(a).then(n,o)}function C(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function s(a){S(i,n,o,s,u,"next",a)}function u(a){S(i,n,o,s,u,"throw",a)}s(void 0)})}}var R=ne(69),U=ne(572);function j(e,r,t){if(null!==e)for(var n,o,i,s,u,a,c,M,E=0,h=0,D=e.type,T="FeatureCollection"===D,Z="Feature"===D,fe=T?e.features.length:1,W=0;W<fe;W++){u=(M=!!(c=T?e.features[W].geometry:Z?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var le=0;le<u;le++){var N=0,Y=0;if(null!==(s=M?c.geometries[le]:c)){a=s.coordinates;var q=s.type;switch(E=!t||"Polygon"!==q&&"MultiPolygon"!==q?0:1,q){case null:break;case"Point":if(!1===r(a,h,W,N,Y))return!1;h++,N++;break;case"LineString":case"MultiPoint":for(n=0;n<a.length;n++){if(!1===r(a[n],h,W,N,Y))return!1;h++,"MultiPoint"===q&&N++}"LineString"===q&&N++;break;case"Polygon":case"MultiLineString":for(n=0;n<a.length;n++){for(o=0;o<a[n].length-E;o++){if(!1===r(a[n][o],h,W,N,Y))return!1;h++}"MultiLineString"===q&&N++,"Polygon"===q&&Y++}"Polygon"===q&&N++;break;case"MultiPolygon":for(n=0;n<a.length;n++){for(Y=0,o=0;o<a[n].length;o++){for(i=0;i<a[n][o].length-E;i++){if(!1===r(a[n][o][i],h,W,N,Y))return!1;h++}Y++}N++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===j(s.geometries[n],r,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ue(e){var r=[1/0,1/0,-1/0,-1/0];return j(e,function(t){r[0]>t[0]&&(r[0]=t[0]),r[1]>t[1]&&(r[1]=t[1]),r[2]<t[0]&&(r[2]=t[0]),r[3]<t[1]&&(r[3]=t[1])}),r}ue.default=ue;const Le=ue;class _e{response;code=401;message="Unauthorized";constructor(r){this.response=r}}const xe=new class ke{latestResponseExecutionTime=0;buffer=[];maxBuffer=4;request(r,t){var n=this;return C(function*(){const o=new AbortController,i=Date.now();n.buffer.length>n.maxBuffer&&(n.buffer[0].abort(),n.buffer.splice(0,1)),n.buffer.push(o);const s=yield fetch(r,{...t,signal:o.signal});if(200!==s.status)throw s;if(n.buffer=n.buffer.filter(u=>u!==o),n.latestResponseExecutionTime>i)throw new Error("Prev response");return n.latestResponseExecutionTime=i,yield s.json()})()}},Ce={request:e=>C(function*(){try{const r=yield xe.request(e.url),n=function te(e,r){void 0===r&&(r={});var t={type:"FeatureCollection"};return r.id&&(t.id=r.id),r.bbox&&(t.bbox=r.bbox),t.features=e,t}(r.routes.map((o,i)=>Ae(o,i)).reduce((o,i)=>[...o,...i],[]));return{bounds:Le(n),rawData:r,geojson:{type:"geojson",data:n}}}catch(r){if(r instanceof Response){const t=r,n=yield t.json();if(401===t.status)throw new _e(n)}throw r}})()},Ae=(e,r)=>e.sections.map((t,n)=>{const i=(0,R.decode)(t.polyline).polyline.map(([a,c])=>({x:a,y:c}));return function oe(e,r,t){if(void 0===t&&(t={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return function _(e,r,t){void 0===t&&(t={});var n={type:"Feature"};return(0===t.id||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=r||{},n.geometry=e,n}({type:"LineString",coordinates:e},r,t)}(U(i,1e-4,!0).map(a=>[+a.y.toFixed(6),+a.x.toFixed(6)]),{waypoint:n,routeIndex:r})});H(Ce)})()})();