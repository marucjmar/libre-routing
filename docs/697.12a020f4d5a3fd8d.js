(()=>{var l,se={69:l=>{const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",R=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="undefined"!=typeof BigInt?BigInt:Number;function P(M){let c=M;return c&f(1)&&(c=~c),c>>=f(1),+c.toString()}function te(M){let c="",y=f(M);for(;y>31;){const C=y&f(31)|f(32);c+=g[C],y>>=f(5)}return c+g[y]}function H(M){let c=f(M);const y=c<0;return c<<=f(1),y&&(c=~c),te(c)}l.exports={encode:function T({precision:M=5,thirdDim:c=0,thirdDimPrecision:y=0,polyline:C}){const N=10**M,D=10**y,I=function U(M,c,y){if(M<0||M>15)throw new Error("precision out of range. Should be between 0 and 15");if(y<0||y>15)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(c<0||c>7||4===c||5===c)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");const C=y<<7|c<<4|M;return te(1)+te(C)}(M,c,y),q=[];let $=f(0),J=f(0),A=f(0);return C.forEach(j=>{const ee=f(Math.round(j[0]*N));q.push(H(ee-$)),$=ee;const Q=f(Math.round(j[1]*N));if(q.push(H(Q-J)),J=Q,c){const ne=f(Math.round(j[2]*D));q.push(H(ne-A)),A=ne}}),[...I,...q].join("")},decode:function m(M){const c=function _(M){let c=f(0),y=f(0);const C=[];if(M.split("").forEach(N=>{const D=f(function b(M){const c=M.charCodeAt(0);return R[c-45]}(N));c|=(D&f(31))<<y,(D&f(32))===f(0)?(C.push(c),c=f(0),y=f(0)):y+=f(5)}),y>0)throw new Error("Invalid encoding");return C}(M),y=function k(M,c){if(1!=+M.toString())throw new Error("Invalid format version");const y=+c.toString();return{precision:15&y,thirdDim:y>>4&7,thirdDimPrecision:y>>7&15}}(c[0],c[1]),C=10**y.precision,N=10**y.thirdDimPrecision,{thirdDim:D}=y;let I=0,q=0,$=0;const J=[];let A=2;for(;A<c.length;)I+=P(c[A])/C,q+=P(c[A+1])/C,D?($+=P(c[A+2])/N,J.push([I,q,$]),A+=3):(J.push([I,q]),A+=2);if(A!==c.length)throw new Error("Invalid encoding. Premature ending reached");return{...y,polyline:J}},ABSENT:0,LEVEL:1,ALTITUDE:2,ELEVATION:3}},697:(l,p,g)=>{"use strict";var R=g(841);function E(n,e,r,t,i,o,u){try{var s=n[o](u),a=s.value}catch(h){return void r(h)}s.done?e(a):Promise.resolve(a).then(t,i)}function S(n){return function(){var e=this,r=arguments;return new Promise(function(t,i){var o=n.apply(e,r);function u(a){E(o,t,i,u,s,"next",a)}function s(a){E(o,t,i,u,s,"throw",a)}u(void 0)})}}var O=g(69),F=g(572);function re(n,e,r){if(null!==n)for(var t,i,o,u,s,a,h,V,x=0,L=0,Z=n.type,B="FeatureCollection"===Z,W="Feature"===Z,ae=B?n.features.length:1,X=0;X<ae;X++){s=(V=!!(h=B?n.features[X].geometry:W?n.geometry:n)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var ue=0;ue<s;ue++){var G=0,Y=0;if(null!==(u=V?h.geometries[ue]:h)){a=u.coordinates;var K=u.type;switch(x=!r||"Polygon"!==K&&"MultiPolygon"!==K?0:1,K){case null:break;case"Point":if(!1===e(a,L,X,G,Y))return!1;L++,G++;break;case"LineString":case"MultiPoint":for(t=0;t<a.length;t++){if(!1===e(a[t],L,X,G,Y))return!1;L++,"MultiPoint"===K&&G++}"LineString"===K&&G++;break;case"Polygon":case"MultiLineString":for(t=0;t<a.length;t++){for(i=0;i<a[t].length-x;i++){if(!1===e(a[t][i],L,X,G,Y))return!1;L++}"MultiLineString"===K&&G++,"Polygon"===K&&Y++}"Polygon"===K&&G++;break;case"MultiPolygon":for(t=0;t<a.length;t++){for(Y=0,i=0;i<a[t].length;i++){for(o=0;o<a[t][i].length-x;o++){if(!1===e(a[t][i][o],L,X,G,Y))return!1;L++}Y++}G++}break;case"GeometryCollection":for(t=0;t<u.geometries.length;t++)if(!1===re(u.geometries[t],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function oe(n){var e=[1/0,1/0,-1/0,-1/0];return re(n,function(r){e[0]>r[0]&&(e[0]=r[0]),e[1]>r[1]&&(e[1]=r[1]),e[2]<r[0]&&(e[2]=r[0]),e[3]<r[1]&&(e[3]=r[1])}),e}oe.default=oe;const ge=oe;class me{latestResponseExecutionTime=0;buffer=[];maxBuffer=4;get hasPendingRequests(){return 0!==this.buffer.length}request(e,r){var t=this;return S(function*(){const i=new AbortController,o=Date.now();t.buffer.length>t.maxBuffer&&(t.buffer[0].abort(),t.buffer.splice(0,1)),t.buffer.push(i);const u=yield fetch(e,{...r,signal:i.signal});if(200!==u.status)throw t.cleanBuffer(i),u;if(t.latestResponseExecutionTime>o)throw t.cleanBuffer(i),new Error("Prev response");t.latestResponseExecutionTime=o;const s=yield u.json();return t.cleanBuffer(i),s})()}cleanBuffer(e){this.buffer=this.buffer.filter(r=>r!==e)}}class ye{response;code=401;message="Unauthorized";constructor(e){this.response=e}}const pe=(n,e)=>({totalTime:n.sections.map(i=>new Date(i.arrival.time).valueOf()-new Date(i.departure.time).valueOf()).reduce((i,o)=>i+o,0),distance:n.sections.map(i=>i.summary.length).reduce((i,o)=>i+o,0),arriveTime:new Date(n.sections[n.sections.length-1].arrival.time),departureTime:new Date(n.sections[0].departure.time),id:e}),Pe=(n,e,r)=>n.sections.map((t,i)=>{const u=(0,O.decode)(t.polyline).polyline.map(([h,x])=>({x:h,y:x}));return function U(n,e,r){if(void 0===r&&(r={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return function m(n,e,r){void 0===r&&(r={});var t={type:"Feature"};return(0===r.id||r.id)&&(t.id=r.id),r.bbox&&(t.bbox=r.bbox),t.properties=e||{},t.geometry=n,t}({type:"LineString",coordinates:n},e,r)}(F(u,1e-4,!0).map(h=>[+h.y.toFixed(6),+h.x.toFixed(6)]),{waypoint:i,routeIndex:e,selected:r===e})}),Ee=new class be{requester=new me;request(e){var r=this;return S(function*(){try{const t=yield r.requester.request(e.url),i=t.routes.map(pe),o=function we(n,e){return"fastest"===e?n.reduce(function(t,i){return t.arriveTime.valueOf()<i.arriveTime.valueOf()?t:i})?.id:"shortest"===e?n.reduce(function(t,i){return t.distance<i.distance?t:i})?.id:null}(i,e.selectRouteStrategy),s=function H(n,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=n,r}(t.routes.map((a,h)=>Pe(a,h,o)).reduce((a,h)=>[...a,...h],[]));return{bounds:ge(s),rawData:t,summary:{routes:i,selectedRouteId:o},geojson:{type:"geojson",data:s}}}catch(t){if(t instanceof Response){const i=t,o=yield i.json();if(401===i.status)throw new ye(o)}throw t}})()}hasPendingRequests(){return this.requester.hasPendingRequests}};(0,R.Jj)(Ee)},572:(l,p,g)=>{var R;!function(){"use strict";function E(d,f){var m=d.x-f.x,b=d.y-f.y;return m*m+b*b}function S(d,f,m){var b=f.x,_=f.y,k=m.x-b,P=m.y-_;if(0!==k||0!==P){var T=((d.x-b)*k+(d.y-_)*P)/(k*k+P*P);T>1?(b=m.x,_=m.y):T>0&&(b+=k*T,_+=P*T)}return(k=d.x-b)*k+(P=d.y-_)*P}function F(d,f,m,b,_){for(var P,k=b,T=f+1;T<m;T++){var U=S(d[T],d[f],d[m]);U>k&&(P=T,k=U)}k>b&&(P-f>1&&F(d,f,P,b,_),_.push(d[P]),m-P>1&&F(d,P,m,b,_))}function w(d,f){var m=d.length-1,b=[d[0]];return F(d,0,m,f,b),b.push(d[m]),b}function z(d,f,m){if(d.length<=2)return d;var b=void 0!==f?f*f:1;return d=m?d:function O(d,f){for(var _,m=d[0],b=[m],k=1,P=d.length;k<P;k++)E(_=d[k],m)>f&&(b.push(_),m=_);return m!==_&&b.push(_),b}(d,b),w(d,b)}void 0!==(R=function(){return z}.call(p,g,p,l))&&(l.exports=R)}()}},fe={};function v(l){var p=fe[l];if(void 0!==p)return p.exports;var g=fe[l]={exports:{}};return se[l](g,g.exports,v),g.exports}v.m=se,v.x=()=>{var l=v.O(void 0,[592],()=>v(697));return v.O(l)},l=[],v.O=(p,g,R,E)=>{if(!g){var O=1/0;for(S=0;S<l.length;S++){for(var[g,R,E]=l[S],F=!0,w=0;w<g.length;w++)(!1&E||O>=E)&&Object.keys(v.O).every(_=>v.O[_](g[w]))?g.splice(w--,1):(F=!1,E<O&&(O=E));if(F){l.splice(S--,1);var z=R();void 0!==z&&(p=z)}}return p}E=E||0;for(var S=l.length;S>0&&l[S-1][2]>E;S--)l[S]=l[S-1];l[S]=[g,R,E]},v.d=(l,p)=>{for(var g in p)v.o(p,g)&&!v.o(l,g)&&Object.defineProperty(l,g,{enumerable:!0,get:p[g]})},v.f={},v.e=l=>Promise.all(Object.keys(v.f).reduce((p,g)=>(v.f[g](l,p),p),[])),v.u=l=>"common.4471ab4b5cbd777d.js",v.miniCssF=l=>{},v.o=(l,p)=>Object.prototype.hasOwnProperty.call(l,p),(()=>{var l;v.tu=p=>(void 0===l&&(l={createScriptURL:g=>g},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(l=trustedTypes.createPolicy("angular#bundler",l))),l.createScriptURL(p))})(),v.p="",(()=>{var l={697:1};v.f.i=(E,S)=>{l[E]||importScripts(v.tu(v.p+v.u(E)))};var g=self.webpackChunklibre_routing_playground=self.webpackChunklibre_routing_playground||[],R=g.push.bind(g);g.push=E=>{var[S,O,F]=E;for(var w in O)v.o(O,w)&&(v.m[w]=O[w]);for(F&&F(v);S.length;)l[S.pop()]=1;R(E)}})(),(()=>{var l=v.x;v.x=()=>v.e(592).then(l)})(),v.x()})();